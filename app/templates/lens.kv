#:import SliverToolbar app.gui.SliverToolbar


<Lens>:
    name: "Lens"

    on_pre_enter:
        root.stream()

    Camera:
        id: capture
        resolution: (640, 480)
        play: False

    MDSliverAppbar:
        id: toolbar
        toolbar_bg: app.theme_cls.primary_color
        toolbar_cls: SliverToolbar("Lens", app)
        hide_toolbar: True

        MDSliverAppbarHeader:
            md_bg_color: app.theme_cls.primary_color
            spacing: "8dp"
            padding: "8dp"

        MDSliverAppbarContent:
            padding: 10
            spacing: 10
            size_hint_y: None
            height: self.minimum_height
            orientation: "vertical"
            md_bg_color: (0,0,0,1) if app.theme_cls.theme_style == "Dark" else (255,255,255,1)

            MDBoxLayout:
                orientation: "vertical"
                padding: 10
                spacing: 50
                size_hint_y: None
                adaptive_height: True
                pos_hint: {'center_x':0.5, 'center_y':0.5}

                HoverRectangle:
                    icon: "folder"
                    text: "Pick an image"
                    pos_hint: {'center_x':0.5, 'center_y':0.5}
                    on_release:
                        root.open_manager()
                    md_bg_color: 34/255, 138/255, 240/255, 1
                    text_color: 1, 1, 1, 1
                    icon_color: 1, 1, 1, 1
                    on_enter:
                        self.md_bg_color = 255/255, 37/255, 106/255, 1
                        self.text_color = 1, 1, 1, 1
                    on_leave:
                        self.md_bg_color = 34/255, 138/255, 240/255, 1
                        self.text_color = 1, 1, 1, 1

                MDBoxLayout:
                    padding: 10
                    spacing: 10
                    orientation: "vertical"
                    size_hint: .75, None
                    adaptive_height: True
                    radius: [30, 30, 30, 30]
                    pos_hint: {'center_x':0.5, 'center_y':0.5}
                    Image:
                        id: image
                        size_hint: None, None
                        allow_stretch: True
                        keep_ratio: True
                        width: self.parent.width
                        height: self.parent.width/self.image_ratio
                        pos_hint: {'center_x':0.5, 'center_y':0.5}
                    Image:
                        id: fit_image
                        size_hint: None, None
                        allow_stretch: True
                        keep_ratio: True
                        width: self.parent.width
                        height: self.parent.width/self.image_ratio
                        pos_hint: {'center_x':0.5, 'center_y':0.5}

                HoverRectangle:
                    id: camera
                    icon: "camera"
                    text: "Take a picture"
                    pos_hint: {'center_x':0.5, 'center_y':0.5}
                    on_release:
                        root.capture(app)
                    md_bg_color: 34/255, 138/255, 240/255, 1
                    text_color: 1, 1, 1, 1
                    icon_color: 1, 1, 1, 1
                    on_enter:
                        self.md_bg_color = 255/255, 37/255, 106/255, 1
                        self.text_color = 1, 1, 1, 1
                    on_leave:
                        self.md_bg_color = 34/255, 138/255, 240/255, 1
                        self.text_color = 1, 1, 1, 1

                MDBoxLayout:
                    orientation: "vertical"
                    spacing: 30
                    padding: 30
                    size_hint: 1, None
                    adaptive_height: True
                    md_bg_color: app.theme_cls.accent_color
                    pos_hint: {'center_x':0.5, 'center_y':0.5}
                    md_bg_color: app.theme_cls.accent_color

                    NewShadowWidget:
                        id: info
                        size_hint: None, None
                        size: (300, 420)
                        pos_hint: {'center_x':0.5, 'center_y':0.5}
                        elevation: 15
                        shadow_radius: 10
                        soft_shadow_cl: app.theme_cls.primary_color
                        hard_shadow_cl: app.theme_cls.primary_color
                        md_bg_color: app.theme_cls.primary_color
                        radius: [30, 30, 30, 30]

                        MDLabel:
                            text: app.translate("Information")
                            valign: "top"
                            halign: "center"
                            font_style: "H5"
                            font_name: app.font_black

                    HoverRectangle:
                        icon: "information"
                        text: "Info"
                        pos_hint: {'center_x':0.5, 'center_y':0.5}
                        halign: "center"
                        on_release:
                            root.info(app)
                        md_bg_color: 34/255, 138/255, 240/255, 1
                        text_color: 1, 1, 1, 1
                        icon_color: 1, 1, 1, 1
                        on_enter:
                            self.md_bg_color = 255/255, 37/255, 106/255, 1
                            self.text_color = 1, 1, 1, 1
                        on_leave:
                            self.md_bg_color = 34/255, 138/255, 240/255, 1
                            self.text_color = 1, 1, 1, 1

                MDBoxLayout:
                    orientation: "vertical"
                    spacing: 30
                    padding: 30
                    size_hint: 1, None
                    adaptive_height: True
                    md_bg_color: app.theme_cls.accent_color
                    pos_hint: {'center_x':0.5, 'center_y':0.5}
                    md_bg_color: app.theme_cls.accent_color

                    NewShadowWidget:
                        id: diag
                        size_hint: None, None
                        size: (300, 420)
                        pos_hint: {'center_x':0.5, 'center_y':0.5}
                        elevation: 15
                        shadow_radius: 10
                        soft_shadow_cl: app.theme_cls.primary_color
                        hard_shadow_cl: app.theme_cls.primary_color
                        md_bg_color: app.theme_cls.primary_color
                        radius: [30, 30, 30, 30]

                        MDLabel:
                            text: app.translate("Diagnose")
                            valign: "top"
                            halign: "center"
                            font_style: "H5"
                            font_name: app.font_black

                    HoverRectangle:
                        icon: "stethoscope"
                        text: "Diagnose"
                        pos_hint: {'center_x':0.5, 'center_y':0.5}
                        halign: "center"
                        on_release:
                            root.diag(app)
                        md_bg_color: 34/255, 138/255, 240/255, 1
                        text_color: 1, 1, 1, 1
                        icon_color: 1, 1, 1, 1
                        on_enter:
                            self.md_bg_color = 255/255, 37/255, 106/255, 1
                            self.text_color = 1, 1, 1, 1
                        on_leave:
                            self.md_bg_color = 34/255, 138/255, 240/255, 1
                            self.text_color = 1, 1, 1, 1
